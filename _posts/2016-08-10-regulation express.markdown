---
title:  “Regular Expression Group”
mathjax: true
layout: post
date:   2016-08-10 08:00:12 +0800
categories: regexp
---

半路出家，一直到毕业其实都感觉不到算是计算机的人了。遥记得某次去面试的时候被问到写一个正则表达式，一脸懵逼。
回去翻书才想里来，在某个章节似乎看到过，当时也不知道拿来干嘛，就略过了。到今天也用的不多，但基本的元字符还是记得的，
神马｀. \w \s \d \b｀之类的，自以为正则表达式就算是会了。结果去年想用正则表达式做匹配内容的捕获，才发现稍微高级点的语法都没看完。


举个例子，想从如下的html源文件中，取出日期列表。当然对于html文件，用jQuery之类的js库，应该更加方便。这儿我们用正则表达式试试。

{% highlight html %}
<div class="datelist">
    <ul>
	<li>
		<a href="#2016-03-31">2016-03-31</a>
		<a href="#2015-12-31">2015-12-31</a>
		<a href="#2015-09-30">2015-09-30</a>
		<a href="#2015-06-30">2015-06-30</a>
	</li>		
    </ul>
</div>
{% endhighlight %}

尝试正则表达：`(?:<a href="#(\d{4}-\d{2}-\d{2})">\1</a>\s*?)*?`  
> *? ： 重复任意次，但尽可能少重复  
> \1 ： 后向引用用于重复搜索前面某个分组匹配的文本。例如，\1代表分组1匹配的文本

成功匹配四次，group(1)分别是 2016-03-31, 2015-12-31, 2015-09-30, 2015-06-30

思考另外一个问题，如果我们希望找到夹在<li></li>里的日期呢？

尝试正则表达：`<li>\s*?(?:<a href="#(\d{4}-\d{2}-\d{2})">\1</a>\s*?)+?</li>`  
> (?:exp): 表示匹配exp，但不捕获匹配的文本，也不给此分组分配组号。

成功找到一处匹配，可是group内容跟预计并不相符。期望group(1), group(2), group(3), group(4)分别是 2016-03-31, 2015-12-31, 2015-09-30, 2015-06-30；可惜如果group成功匹配多次，仅返回最后一处，因此结果是group(1) = 2015-06-30

推荐链接：[正则表达式30分钟入门教程][regex-link]

[regex-link]:http://www.jb51.net/tools/zhengze.html
